(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(28)},17:function(e,t,n){},19:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(1),i=n.n(r),l=(n(17),n(5)),s=n(6),c=n(9),u=n(7),m=n(10),d=(n(19),n(8)),h=n.n(d),p=n(2),g=n.n(p);function f(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onload=function(){n.status<300?t(n.response):console.log("error",n.status,"body",n.response)},n.send()}function w(){return o.a.createElement("div",{style:{borderBottom:"1px solid black"}})}function v(e){var t=e.x,n=e.self,a=e.inColl,r=e.arr;return o.a.createElement(g.a,{key:e.key,anchor:[t.lat,t.long]},n.inReach(r,t)?o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"},onClick:function(){-1===n.state.collected.findIndex(function(e){return e.arena_id===t.arena_id})&&n.inReach(r,t)&&(console.log("claim "+t.arena_id),n.setState({collected:n.state.collected.concat([t])}))}},n.getSymbol(t,r,a,!0),a&&o.a.createElement("img",{alt:"",src:t.image_uris&&t.image_uris.art_crop,width:100,height:457/624*100})):n.getSymbol(t,r,a,!0))}var E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={zoom:17,collected:[],time:0,strategy:function(e,t,n){return"http://b.tile.stamen.com/watercolor/"+n+"/"+e+"/"+t+".jpg"}},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"tick",value:function(){var e=this,t=(new Date).getTime(),n=this.state.time;t-n>3e4&&function(){console.log("4 sec passed");var n=e;e.setState({time:t});var a=e.state.loc||{},o=a.latitude,r=a.longitude;if(o){f("https://api.openweathermap.org/data/2.5/weather?lat="+o+"&lon="+r+"&appid=25789a3c7e539e6cf6fb2ae24a3498dc",function(e){console.log("we",e);var t=e.weather&&e.weather[0]||{};n.setState({weather:t.main,weatherIcon:t.icon})});var i=["service","post","park","restaurant","shop","local"];for(var l in i){f("https://api.tomtom.com/search/2/poiSearch/"+i[l]+".json?key=xB0Y7FfKjp2gNTFeA4l7oMm1wWI8YL6G&lat="+o+"&lon="+r+"&radius=115000",function(e){console.log("it",e);var t=((e||{}).results||[]).map(function(e){return{name:(e.poi||{}).name,long:e.position.lon,lat:e.position.lat}});n.setState({items:(n.state.items||[]).filter(function(e){return-1===t.findIndex(function(t){return e.lat===t.lat&&e.long===e.long})}).concat(t)})})}}else console.log("no current pos")}()}},{key:"componentDidMount",value:function(){var e=this,t=this;function n(){t.setState({w:window.innerWidth-3,h:window.innerHeight-4})}window.scrollTo(0,1),n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),"geolocation"in navigator&&(setInterval(function(){return e.tick()},1e3),this.registerWatchLocation())}},{key:"registerWatchLocation",value:function(){var e=this;navigator.geolocation.watchPosition(function(t){e.setState({loc:{latitude:t.coords.latitude,longitude:t.coords.longitude,heading:t.coords.heading,speed:t.coords.speed}}),e.state.firstPos||(console.log("firstPos",t.coords),e.setState({firstPos:!0}))})}},{key:"inReach",value:function(e,t){return this.dist(e,t)<.0014}},{key:"dist",value:function(e,t){var n=e[0]-t.lat,a=e[1]-t.long;return Math.sqrt(n*n+a*a)}},{key:"render",value:function(){var e=this,t=this.state.loc?[this.state.loc.latitude,this.state.loc.longitude]:[54.3126,10.11],n=(this.state.firstPos,this.state),a=n.w,r=n.h,i=this.state.zoom;return o.a.createElement("div",{className:"App"},o.a.createElement(h.a,{center:t,zoom:i,width:a,height:r},o.a.createElement(g.a,{anchor:t},o.a.createElement("div",{className:"ripplecontainer"},o.a.createElement("span",{className:"circle photo"}),o.a.createElement("div",{className:"ripplecircle"}))),(this.state.locations||[]).map(function(n,a){return v({key:"ca"+a,inColl:e.state.collected.findIndex(function(e){return e.arena_id===n.arena_id})>=0,x:n,self:e,arr:t})}),(this.state.items||[]).map(function(n,a){return v({key:"it"+a,inColl:!1,x:n,self:e,arr:t})})),o.a.createElement("div",{style:{position:"absolute",top:0,right:0}},o.a.createElement("div",{onClick:function(){return!e.state.info&&e.setState({info:!e.state.info})},style:{backgroundColor:"rgba(255,255,255,0.8)",padding:8}},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},o.a.createElement("span",{className:"ms ms-multiple",style:{margin:10}}),(this.state.weather||"").toLowerCase(),this.state.weatherIcon&&o.a.createElement("img",{src:"http://openweathermap.org/img/w/"+this.state.weatherIcon+".png",alt:"",width:"50",height:"50",style:{margin:10}})),this.state.info&&o.a.createElement("div",null,w(),o.a.createElement("small",null,o.a.createElement("a",{href:"#",onClick:function(){return e.registerWatchLocation()}},"register location"),o.a.createElement("br",null),o.a.createElement("br",null),"screen: ",this.state.w,"x",this.state.h,o.a.createElement("br",null),o.a.createElement("span",null,"uses: "),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"https://pigeon-maps.js.org",target:"_blank",rel:" noopener noreferrer"},"pigeon maps")),o.a.createElement("li",null,o.a.createElement("a",{href:"http://maps.stamen.com",target:"_blank",rel:"noopener noreferrer"},"stamen-watercolor")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://developer.tomtom.com/",target:"_blank",rel:"noopener noreferrer"},"tomtom poi api")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://openweathermap.org/",target:"_blank",rel:"noopener noreferrer"},"openwathermaps")))),w(),o.a.createElement("a",{href:"#",onClick:function(){return e.state.info&&e.setState({info:!e.state.info})}},"close")))))}},{key:"getSymbol",value:function(e,t,n,a){var r=((e.color_identity||[])[0]+"").toString().toLowerCase();2===(e.color_identity||[]).length&&(r={uw:"guild-azorius",rw:"guild-boros",bu:"guild-dimir",bg:"guild-golgari",gr:"guild-gruul",ru:"guild-izzet",bw:"guild-orzhov",br:"guild-rakdos",gw:"guild-selesnya",gu:"guild-simic"}[e.color_identity.sort().join("").toLowerCase()]);return o.a.createElement("span",{style:{color:n?"#10A010":a?"#000000":"#303030"}},o.a.createElement("span",{style:{fontSize:"160%"},className:"ms ms-"+r})," ",a&&e.name,n?" \u2713":o.a.createElement("i",null," ",(1e5*this.dist(t,e)).toFixed(3),"m"))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.2b7a7df4.chunk.js.map